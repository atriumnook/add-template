# マイルストーンの作成

リリース単位の計画を作成し、タスクを割り当てる。

## 前提確認

1. docs/project.md を読み、プロダクトのビジョン・対象ユーザーを把握する
2. 既存のマイルストーンの状態を確認する
   - `docs/milestones/` を検索
   - 未完了のマイルストーン（status: planning / active）がないか確認
3. 対象タスクの requirements が存在する場合は把握する

## 実行手順

1. **ユーザーにマイルストーン情報を確認する**
   - バージョン番号（例: v1.0, v1.1）
   - タイトル（例: MVP, ユーザー管理機能）
   - ゴール（1-2文）
   - ターゲット日付
   - 含むタスクの一覧
   - 含まないもの（スコープ外の明示）

2. **ファイルを作成する**
   - 配置先: `docs/milestones/{{version}}-{{name}}.md`
   - テンプレート: `docs/milestones/_TEMPLATE.md` を使用
   - status は `planning` で作成する

3. **タスク一覧を構成する**
   - 各タスクの概要（1行説明）をユーザーに確認する
   - タスクの並び順 = 優先度であることを案内する
   - 既に requirements が存在するタスク → ステータスを requirements から取得
   - 未作成のタスク → ステータスを `draft` として登録
   - 各タスクの scope（lite/full）を判定する:
     - 単一ドメイン + 既存 specs の軽微な変更 → **lite** を推奨
     - 複数ドメイン / API 変更 / セキュリティ影響 / 新規ドメイン → **full** を推奨
   - ユーザーの判定上書きを受け付ける

4. **完了条件を設定する**
   - デフォルトの完了条件に加え、プロジェクト固有の条件をユーザーに確認する

5. **docs/state.md を更新する**
   - `current_milestone` を新しいマイルストーンのバージョンに設定する

6. **rigor レベルを設定する**
   - マイルストーン全体のデフォルト rigor を設定する（各タスクの scope の初期値として適用される）
   - lite: 小規模リリース、機能改善、バグ修正集
   - full: 新規機能群、アーキテクチャ変更、セキュリティ関連
   - 個々のタスクの scope はタスク一覧で個別に上書きできる

## 完了条件

- [ ] マイルストーンファイルが正しいパスに作成されている
- [ ] ゴール・スコープが記入されている
- [ ] タスク一覧に対象タスクが全て含まれている
- [ ] 各タスクの scope（lite/full）が設定されている
- [ ] docs/state.md の current_milestone が更新されている

## 関連スキル

- **doc-placement**: ファイル配置先・命名規約の判断基準
