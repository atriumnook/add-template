# 開発フローガイド

## 全体の流れ

```text
1. チケット起票 / 課題の特定
       ↓
2. 要件定義の作成（/create-requirement）
       ↓
3. 仕様書の作成・更新（/create-spec）
       ↓
4. 実装 + テスト（/implement）
       ↓
5. PR 作成 + レビュー（/review）
       ↓
6. マージ → main の specs = 確定仕様
```

## 各ステップの詳細

### Step 1: チケット起票 / 課題の特定

- PdM・エンジニア・QAでディスカッションし、何を作るか合意する
- チケット管理ツールにチケットを作成する（未導入の場合は日付で代替）

### Step 2: 要件定義の作成

**コマンド**: `/create-requirement`

- feature ブランチを切る: `feat/PROJ-142-invitation`
- `docs/requirements/PROJ-142-invitation.md` を作成
- AIに叩きを作らせ、チームでレビュー・ブラッシュアップ
- 受け入れ基準を必ず含める（これがテストの元になる）

**仕様変更の場合**:

- 既存機能の変更なら、ADDED / MODIFIED / REMOVED セクションを使う
- 変更理由を必ず記載する

### Step 3: 仕様書の作成・更新

**コマンド**: `/create-spec`

- 要件をもとに `docs/specs/` の仕様書を作成または更新
- API仕様・ドメインモデルをここで定義する
- 新規ドメインの場合: overview.md → api.md → domain-model.md の順で作成
- 既存仕様の更新の場合: requirements の 変更区分セクションに従って specs を更新

### Step 4: 実装 + テスト

**コマンド**: `/implement`

- specs を入力としてAIにコードを生成させる
- テストも同時に作成する（qa/test-strategy.md の方針に従う）
- 実装中に仕様の不備に気づいた場合:
  1. requirements に変更経緯を追記
  2. specs を更新
  3. コードを修正
  - **specs を直接編集してはならない**

### Step 5: PR 作成 + レビュー

**コマンド**: `/review`

- PR には以下を全て含める:
  - docs/requirements/ の変更
  - docs/specs/ の変更
  - src/ のコード変更
  - tests/ or e2e/ のテスト

- レビュー観点:
  - 要件 → 仕様 → コード → テスト の一貫性
  - アーキテクチャ方針・コーディング規約への準拠
  - テストが受け入れ基準をカバーしているか

### Step 6: マージ

- main にマージ = specs が確定仕様になる
- マージ後の main の specs は「リリース済み（またはリリース可能な）仕様」

## AIの活用ポイント

| 工程       | AI の役割                      | 人間の役割               |
| ---------- | ------------------------------ | ------------------------ |
| 要件定義   | 叩き作成・ブラッシュアップ支援 | 判断・承認               |
| 仕様策定   | 要件→仕様の構造化              | レビュー・修正指示       |
| 実装       | 仕様→コード生成                | レビュー・受け入れ       |
| テスト     | 受け入れ基準→テストコード生成  | レビュー・追加観点の指示 |
| PRレビュー | 一貫性チェック支援             | 最終判断                 |

## 禁止事項

ワークフローの絶対ルールは [.claude/rules/document-workflow.md](../../.claude/rules/document-workflow.md) を参照。
